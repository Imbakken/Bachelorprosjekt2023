import{S as p,i as g,s as b,C as v,k as w,l as $,m as S,h as f,n as y,b as C,D,E as R,F as A,g as E,d as F,o as J}from"../chunks/index.317fa1c7.js";import{a as K,Z as _,d as h,K as M,J as T,b as U}from"../chunks/store.a7ae9623.js";function Z(l){let a,n;const i=l[1].default,e=v(i,l,l[0],null);return{c(){a=w("div"),e&&e.c(),this.h()},l(t){a=$(t,"DIV",{class:!0});var s=S(a);e&&e.l(s),s.forEach(f),this.h()},h(){y(a,"class","mainContainer svelte-1gobaup")},m(t,s){C(t,a,s),e&&e.m(a,null),n=!0},p(t,[s]){e&&e.p&&(!n||s&1)&&D(e,i,t,t[0],n?A(i,t[0],s,null):R(t[0]),null)},i(t){n||(E(e,t),n=!0)},o(t){F(e,t),n=!1},d(t){t&&f(a),e&&e.d(t)}}}function k(l,a,n){let{$$slots:i={},$$scope:e}=a;const t=["/","product"];return J(()=>(console.log("Mounting"),K.onAuthStateChanged(async o=>{const c=window.location.pathname;if(!o&&!t.includes(c)){window.location.href="/";return}if(o&&c==="/"){window.location.href="/dashboard";return}if(!o)return;let r;const m=_(h,"users",o.uid),d=await M(m);if(d.exists())console.log("Fetching User"),r=d.data();else{console.log("Creating User");const u=_(h,"users",o.uid);r={email:o.email,name:o.name},await T(u,r,{merge:!0})}U.update(u=>({...u,user:o,data:r,loading:!1}))}))),l.$$set=s=>{"$$scope"in s&&n(0,e=s.$$scope)},[e,i]}class L extends p{constructor(a){super(),g(this,a,k,Z,b,{})}}export{L as default};
